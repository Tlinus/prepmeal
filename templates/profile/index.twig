{% extends "layouts/base.twig" %}

{% block title %}{{ page_title }}{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <div class="max-w-2xl mx-auto">
        <h1 class="text-3xl font-bold text-gray-900 mb-8">{{ page_title }}</h1>
        
        {% if flash_message %}
            <div class="mb-6 p-4 rounded-md {% if flash_message.type == 'error' %}bg-red-100 text-red-700 border border-red-300{% else %}bg-green-100 text-green-700 border border-green-300{% endif %}">
                {{ flash_message.message }}
            </div>
        {% endif %}

        <div class="bg-white shadow rounded-lg p-6">
            <form method="POST" action="/profile" class="space-y-6">
                <div>
                    <label for="name" class="block text-sm font-medium text-gray-700">Nom</label>
                    <input type="text" id="name" name="name" value="{{ user.name ?? '' }}" required
                           class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>

                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
                    <input type="email" id="email" name="email" value="{{ user.email ?? '' }}" required
                           class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>

                <div>
                    <label for="locale" class="block text-sm font-medium text-gray-700">Langue</label>
                    <select id="locale" name="locale" required
                            class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="fr" {% if (user.locale ?? 'fr') == 'fr' %}selected{% endif %}>Français</option>
                        <option value="en" {% if (user.locale ?? 'fr') == 'en' %}selected{% endif %}>English</option>
                        <option value="es" {% if (user.locale ?? 'fr') == 'es' %}selected{% endif %}>Español</option>
                        <option value="de" {% if (user.locale ?? 'fr') == 'de' %}selected{% endif %}>Deutsch</option>
                    </select>
                </div>

                <div>
                    <label for="units" class="block text-sm font-medium text-gray-700">Unités</label>
                    <select id="units" name="units" required
                            class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="metric" {% if (user.units ?? 'metric') == 'metric' %}selected{% endif %}>Métrique (kg, g, l, ml)</option>
                        <option value="imperial" {% if (user.units ?? 'metric') == 'imperial' %}selected{% endif %}>Impérial (lb, oz, gal, fl oz)</option>
                    </select>
                </div>

                <div class="flex justify-end space-x-4">
                    <a href="/profile/preferences" class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">
                        Préférences alimentaires
                    </a>
                    <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                        Sauvegarder
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
